import React, { useState, useEffect } from 'react';
import { Descriptions, Card } from 'antd';
import type { DescriptionsProps } from 'antd/es/descriptions';
import axios from 'axios';
import { useLocation } from 'react-router-dom';

const AvailableTimes: React.FC = () => {
  const [profile, setProfile] = useState<any>(null);
  const location = useLocation();
  const doctorId = new URLSearchParams(location.search).get('doctorId');

  useEffect(() => {
    const fetchData = async () => {
      try {
        if (!doctorId) {
          console.error('Doctor ID not provided');
          return;
        }

        // Fetch data from the server
        const response = await axios.get(`http://localhost:8080/patient/${doctorId}/profile`);
        setProfile(response.data);
        console.log(profile);
      } catch (error) {
        console.error('Error fetching profile data:', error);
      }
    };

    fetchData();
  }, [doctorId]);

  const items: DescriptionsProps['items'] = profile
    ? [
        {
          key: '1',
          label: 'Name',
          children: profile.name,
        },
        {
          key: '2',
          label: 'Specialization',
          children: profile.specialization,
        },
        // Add more profile data here as needed
      ]
    : [];

  return (
    <div>
      {/* Booking section */}
      <h3>Booking Section</h3>
      {/* Add your booking form or component here */}
      <Card style={{ width: 800, margin: 'auto', marginBottom: 20 }}>
        <img
          width={200}
          src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
          alt="Doctor"
        />
        <Descriptions layout="vertical" items={items} />
      </Card>
      <Card style={{ width: 800, margin: 'auto', marginBottom: 20 }}>
        <h3>Schedule Appointments</h3>
        {/* Add your scheduling component here */}
        {/* <Descriptions layout="vertical" /> */}
      </Card>
    </div>
  );
};

export default AvailableTimes;
